function wishListAddorCreate(){var wishlistPopup=document.querySelector(".glis-popup-link");wishlistPopup?wishlistPopup.click():Swal.fire({title:"Faça login para favoritar",html:"Clique abaixo para realizar <b>Login</b> ou <b>Criar a sua Conta</b>. É super rápido!",icon:"info",iconColor:"#FFDA00",confirmButtonText:"Entre ou Cadastre-se",confirmButtonColor:"#F90041"}).then((function(result){result.isConfirmed&&window.location.replace("/login")})),setTimeout((function(){var wishlistLink=document.querySelector('a[title="Wishlist"]');if(wishlistLink)wishlistLink.click(),swalPopupAdd(),document.getElementById("wishlist_add").style.display="none",document.getElementById("wishlist_remove").style.display="block";else{var inputNomeLista=document.querySelector('input[title="nome da lista"]');if(inputNomeLista){inputNomeLista.value="wishlist";var submitNewLink=document.querySelector(".glis-submit-new");submitNewLink&&(submitNewLink.click(),swalPopupAdd(),document.getElementById("wishlist_add").style.display="none",document.getElementById("wishlist_remove").style.display="block")}}}),1e3)}function listSkusFromWishlistPdp(){var iframe=document.getElementById("iframe_wishlistId"),iframeDocument,listIdElement=(iframe.contentDocument||iframe.contentWindow.document).querySelector(".giftlist-body-id");if(null!==listIdElement){var listId,urlGet=`https://www.sunhouse.com.br/no-cache/giftlistv2/getskulist/${listIdElement.innerHTML}/3/10/true`;function searchValueInArray(array,value){for(let i=0;i<array.length;i++){const item=array[i];if("object"==typeof item){if(searchValueInObject(item,value))return!0}else if(item===value)return!0}return!1}}function searchValueInObject(object,value){for(const key in object)if(object.hasOwnProperty(key)){const item=object[key];if("object"==typeof item){if(searchValueInObject(item,value))return!0}else if("SkuId"===key&&item===value)return!0}return!1}fetch(urlGet).then(response=>{if(!response.ok)throw swalAnyError(),new Error("Erro ao carregar os dados da requisição");return response.json()}).then(data=>{var skuIdString=document.getElementById("___rc-p-id").getAttribute("value"),skuId=parseInt(skuIdString);const exists=searchValueInArray(data.Items,skuId);exists&&(document.getElementById("wishlist_add").style.display="none",document.getElementById("wishlist_remove").style.display="block")}).catch(error=>{console.error("Ocorreu um erro:",error)})}function swalPopupAdd(){const Toast=Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:4e3,timerProgressBar:!0,didOpen:toast=>{toast.onmouseenter=Swal.stopTimer,toast.onmouseleave=Swal.resumeTimer}});Toast.fire({icon:"success",title:"Produto adicionado à sua Lista de Desejos!"})}function swalPopupRmv(){const Toast=Swal.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:4e3,timerProgressBar:!0,didOpen:toast=>{toast.onmouseenter=Swal.stopTimer,toast.onmouseleave=Swal.resumeTimer}});Toast.fire({icon:"error",title:"Produto removido da sua Lista de Desejos!"})}function swalAnyError(){Swal.fire({title:"Houve um erro inesperado!",text:"Tente novamente mais tarde.",icon:"error",allowOutsideClick:!1,allowEscapeKey:!1,confirmButtonText:"OK"})}function executarVerificacao(){wishListAddorCreate()}function removeFromWishlistPdp(){var iframe=document.getElementById("iframe_wishlistId"),iframeDocument,listId=(iframe.contentDocument||iframe.contentWindow.document).querySelector(".giftlist-body-id").innerHTML,skuId=document.getElementById("___rc-p-id").getAttribute("value"),urlRmv;fetch(`https://www.sunhouse.com.br/no-cache/giftlistv2/changewishedamount/${listId}/${skuId}/0`,{method:"POST",headers:{"Content-Type":"application/json"}}).then(response=>{if(!response.ok)throw swalAnyError(),new Error("Erro na solicitação POST");swalPopupRmv(),document.getElementById("wishlist_remove").style.display="none",document.getElementById("wishlist_add").style.display="block"}).catch(error=>console.error("Erro:",error))}window.onload=function(){listSkusFromWishlistPdp()},document.getElementById("wishlist_add").addEventListener("click",executarVerificacao),document.getElementById("wishlist_remove").addEventListener("click",removeFromWishlistPdp);